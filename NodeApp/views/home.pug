doctype html
html
    head
        title toDO.list
        script(src ="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js")
        script(src="./node_modules/bootstrap/dist/js/bootstrap.min.js")
        script(src="./node_modules/bootstrap-treeview/public/js/bootstrap-treeview.js")
        link(href="./node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet")
        link(href="./node_modules/bootstrap-treeview/public/css/bootstrap-treeview.css" rel="stylesheet")
        script.
            $(document).ready(function() {
                $.get("/home/getTreeData", {r: "treeData" }, (treeData) => {
                    treeData.push ({text: 'Nueva categoria', href:"/home/createList", tags:["<a type=\"Button\" data-toggle=\"modal\" data-target=\"#myModal\">Crear</a>"]});
                    $("#tree").treeview({data:treeData, enableLinks:true, showTags:true});
                });
            });
            function createCat() {
                $.get("/home/getTreeData", {catName: ($("#catName").serialize()).slice(7)}, (treeData) => {
                    $("#tree").treeview({data:treeData, enableLinks:true, showTags:true});
                });
            }
    body
        h1 HOME
        form(method="get" action="/logout" id="logoutForm")
             input(type="submit" value="Logout")
        p User:
        span #{user}
        hr
        div(id="tree")
        p #{myLists}
        hr
        form(id="listManagementForm")
            input(type="button" value="Create list" onclick="createList()")
            input(type="button" value="Delete list")
            div(class="modal fade" id="myModal" role="dialog")
                div(class="modal-dialog modal-sm")
                    div(class="modal-content")
                        div(class="modal-header")
                            button(type="button" class="close" data-dismiss="modal") &times;
                            h4(class="modal-title") New category
                        div(class="modal-body")
                                input(type="text" id="catName" placeholder="Category name" name="campo1")
                                input(type="button" value="Ok" data-dismiss="modal" onclick="createCat()")