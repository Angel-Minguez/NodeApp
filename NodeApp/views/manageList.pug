script.
    $(document).ready(()=>{
        if($("#selectCat").val() === 'New') $("#newCatForm").show();
        $("#createCatText").attr("disabled", true);
        $(".selectpicker").selectpicker();
    });
            function addTask(){
                $("#addItemButton").toggle();
                $("#addItemForm").toggle();
                $("#addItemText").focus();
            }
            function postLine() {
                $.post("/home/manageList/addListItem_form", $("#listItemForm").serialize(), (data) => {
                        $("#listContainer").append(data);
                });
            }
            function postTitle(){
                $.post("/home/manageList/addListTitle_form", {campo1: $("#createTitleText").val()}, (data) => {
                });
            }
            function editTitle() {
                $.post("/home/manageList/addListTitle_form", {campo1: $("#editTitleText").val()}, (data) => {
                    saveList();
                    $("#titleDiv").text($("#editTitleText").val());
                    showEditTitle();
                });
            }
            function postCat() {
                $.post("/home/manageList/addListCat_form", $("#newCatForm").serialize(), (data) => {
                        $("#listContainer").append(data);
                });
            }
            function saveList() {
                $.post("/home/manageList/saveList_form",{cat:$("#selectCat").val()}, (data) => {
                    if(data==='SAVE_OK') updateTreeView();
                });
            }
            function catChange() {
                if($("#selectCat").val() === 'New') {
                    $("#createCatText").val("Type a new category");
                    $("#createCatText").attr("disabled", false);
                    $("#createCatText").focus();
                    return;
                }
                $("#createCatText").val($("#selectCat").val());
                $("#createCatText").attr("disabled", true);
            }
            function showEditTitle(){
                $("#thTitle").toggle();
                $("#thEditTitle").toggle();
                $("#editTitleText").focus();
            }
            function updateView() {
                $("#tree").treeview("selectNode", $("#tree").treeview("getSelected"));
            }
div(class="container-fluid")
    div(class="col-xs-12")
        table(class="table table-borderless")
            thead
                tr
                    th(id="thTitle")
                        #action
                            if(action==='create')
                                div(class="row")
                                    div(class="btn-group")
                                        div(class="col-xs-10")
                                            input(type="text" class="form-control input-sm" id="createTitleText" value= title)
                                        div(class="col-xs-2")
                                            button(class="btn btn-sm btn-primary btn-block" type="button" id="titleDropdown" onclick="postTitle()") Set title
                                br
                                div(class="row")
                                    div(class="btn-group")
                                        div(class="col-xs-10" id="newCatForm")
                                            input(type="text" class="form-control input-sm" id="createCatText" value= cat)
                                        div(class="col-xs-2")
                                            select(class="selectpicker" id="selectCat" data-style="btn-primary btn-sm" data-width="100%" onchange="catChange()")
                                                each val in cats
                                                    option!= val
                            else
                                div(class="row")
                                    div(class="col-xs-10" id="titleDiv") #{title}
                                    div(class="col-xs-2")
                                        div(class="dropdown btn-block" id="dropdownTitle") 
                                            div(class="btn-group")
                                                button(class="btn btn-sm btn-primary dropdown-toggle btn-block" type="button" id="titleDropdown" data-toggle="dropdown") Options
                                                    span(class="caret")
                                                ul(class="dropdown-menu dropdown-menu-right" role="menu" aria-labelledby="menu1")
                                                    li(role="presentation")
                                                        a(role="menuitem" href="#" onclick="showEditTitle()") Edit title
                                                    li(role="presentation")
                                                        a(role="menuitem" href="#" onclick="deleteList('"+title+"', '"+cat+"')") Delete list
                    th(id="thEditTitle")
                        div(class="row")
                            div(class="col-xs-8")
                                div(class="btn-group")
                                    input(type="text" class="form-control input-sm" id="editTitleText" value= title)
                            div(class="col-xs-2")
                                input(type="button" class="btn btn-sm btn-primary btn-block" value="Edit" id="listTitleButton" name="campo1" onclick="editTitle()")
                            div(class="col-xs-2")
                                input(type="button" class="btn btn-sm btn-primary btn-block" value="Cancel" id="listTitileCancelButton" onclick="showEditTitle()")
            tbody
                tr(id="addItemButton")
                    td
                        div(class="row")
                            div(class="col-xs-12")
                                button(class="btn btn-primary btn-block" type="button" onclick="addTask()") Add a new task
                tr(id="addItemForm")     
                    td
                        div(class="row")
                            div(class="col-xs-12")
                                input(type="text" class="form-control input-sm" id="addItemText" placeholder="Add a description of your new task")
                        div(class="row")
                            div(class="col-xs-2")
                                button(class="btn btn-sm btn-primary btn-block" type="button" onclick="") Submit
                            div(class="col-xs-2")
                                button(class="btn btn-sm btn-primary btn-block" type="button" onclick="") Cancel
                            div(class="col-xs-4")
                            div(class="col-xs-2")
                                button(class="btn btn-sm btn-primary btn-block" type="button" onclick="") Priority
                            div(class="col-xs-2")
                                button(class="btn btn-sm btn-primary btn-block" type="button" onclick="") Date

    //tbody
        //each val in elem
            //tr        
                //td(id="thListItem")
                    //div(class="row")
                        //div(class="col-xs-10")
                            //input(class="form-control" type="text" value= val disabled="true")
div(id="listContainer")
    form(id="listDone")
        input(type="button" value="Done" onclick="saveList()")
    